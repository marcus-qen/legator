# v1.0.0-alpha.19 — Stage 3.3 capacity-aware admission controller for async jobs

Release date: 2026-03-01

## Highlights

### 1) Scheduled-job admission is now policy-aware
- The async jobs scheduler now evaluates capacity policy outcomes before dispatching each job run target.
- Outcomes are applied directly in the job path:
  - `allow` → dispatch to probe
  - `queue` → deferred admission queue with automatic re-evaluation
  - `deny` → terminal denied run with rationale

### 2) Deferred queue behavior and explicit denied status
- Added queued admission run state (`status=queued`) for deferred scheduling while keeping overlap guardrails.
- Added explicit denied run state (`status=denied`) when policy denies execution.
- Queued runs are re-evaluated and drained without requiring manual intervention.

### 3) Observability and explainability improvements
- Added additive run fields:
  - `admission_decision`
  - `admission_reason`
  - `admission_rationale`
- Added lifecycle/audit/event-bus events:
  - `job.run.admission_allowed`
  - `job.run.admission_queued`
  - `job.run.admission_denied`
  - `job.run.denied`
- Added run-history filter/summaries support for `queued` and `denied` statuses.

## Validation checklist
- `go test ./...` (pre-change baseline) ✅
- `go test ./...` (post-change) ✅
- `make >/tmp/make.log && ./hack/e2e-test.sh` ✅

## Upgrade notes
- No breaking API changes.
- New admission fields and statuses are additive.
- Existing clients remain compatible; clients that care about admission semantics can opt into new fields/events.
