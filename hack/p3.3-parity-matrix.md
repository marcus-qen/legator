# v0.9.0 P3.3 Parity Matrix (CLI/API/UI/ChatOps)

## Target behaviors

| Surface | Approval list | Approval decision authz | Typed confirmation | Error semantics |
|---|---|---|---|---|
| API | `GET /api/v1/approvals` | enforced via RBAC+UserPolicy | n/a (single call) | structured JSON + status code |
| CLI | `legator approvals` | must match API decision outcome | n/a (delegates to API) | non-zero exit + API error surfacing |
| ChatOps | `/approvals` | must match API decision outcome | **required** via `/confirm` + TTL | human-readable + API reason passthrough |
| UI (dashboard) | Approvals page | should match API decision authorization | should not bypass safety gates | clear denial feedback |

## Current baseline probe

Use `hack/p3.3-parity-suite.sh` to capture parity evidence against a live API.

Known gap to close in P3.3/P3.4 hardening:
- Dashboard approval action path currently performs direct Kubernetes status update (`handleApprovalAction -> updateApproval`) rather than flowing through API authz/safety path.
