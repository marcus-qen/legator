# v1.0.0-alpha.29 â€” Stage 3.7.4 federation failover semantics + consistency guards

## Highlights

### 1) Explicit federation failover semantics

- Federation sources now support outage failover via cached snapshot fallback for the same source + (`tag`, `status`) filter tuple.
- When failover is active, source entries remain visible with explicit degraded semantics and source error context.
- If no cached snapshot exists for an unavailable source, behavior remains explicit `unavailable` with no silent data substitution.

### 2) Stale snapshot guard behavior

- Added stale snapshot detection (default threshold: 5 minutes) to federated reads.
- Stale snapshots are marked degraded and flagged with consistency + warning indicators.
- Snapshot age is exposed as `consistency.snapshot_age_seconds` when available.

### 3) Additive consistency indicators (REST + MCP + UI)

- Added additive source-level consistency metadata:
  - `consistency.freshness` (`fresh` / `stale` / `unknown`)
  - `consistency.completeness` (`complete` / `partial` / `unavailable`)
  - `consistency.degraded`
  - `consistency.failover_mode` (`none` / `cached_snapshot` / `unavailable`)
  - `consistency.snapshot_age_seconds`
- Added additive top-level federation consistency rollup:
  - `consistency.freshness` (`fresh` / `mixed` / `stale` / `unknown`)
  - `consistency.completeness` (`complete` / `partial` / `unavailable` / `unknown`)
  - `consistency.partial_results`
  - `consistency.failover_active`
  - `consistency.stale_sources`, `consistency.partial_sources`, `consistency.unavailable_sources`, `consistency.failover_sources`
- `/federation` UI now renders freshness/completeness/failover indicators for summary and per-source rows.

### 4) Tests + docs

- Added federation read-model tests for:
  - outage with cached failover behavior
  - stale snapshot degradation behavior
  - partial/unavailable consistency semantics
- Added REST + MCP coverage for consistency/failover indicator exposure.
- Updated federation docs and changelog for Stage 3.7.4.

## Compatibility

- [compat:additive] Added source and rollup consistency/failover metadata and guard behavior without removing or renaming existing REST routes, MCP tools, MCP resources, or existing payload fields.
