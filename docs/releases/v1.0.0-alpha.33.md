# v1.0.0-alpha.33 â€” Stage 3.8.4 automation packs audit timeline + replay artifacts

## Highlights

### 1) Persisted execution audit timeline with deterministic replay order

Automation-pack executions now persist ordered timeline events with stable event IDs and timestamps.

- Per-step lifecycle events (start, attempt start/result, finish, blocked/skipped)
- Policy evaluation checkpoints
- Approval checkpoints + decisions
- Rollback start/result events
- Execution start/finish markers

### 2) Persisted replay/debug artifacts

Execution persistence now stores additive artifacts for replay/debug/forensics, including:

- policy rationale snapshots
- approval checkpoint snapshots
- stdout/stderr snippets (when provided by action runner)
- error context payloads for failed/timed-out attempts and rollback failures
- action payload/message artifacts (when provided)

### 3) Additive retrieval APIs for timelines and artifacts

Added additive read endpoints:

- `GET /api/v1/automation-packs/executions/{executionID}/timeline`
- `GET /api/v1/automation-packs/executions/{executionID}/artifacts`

Timeline route includes a replay descriptor with deterministic event ordering metadata (`ordered_event_ids`, counts, first/last timestamp).

Optional filters:

- `step_id`
- `type`

### 4) Coverage and edge-case tests

Added tests covering:

- deterministic timeline ordering and event ID sequencing
- persisted artifact types for policy/approval/stdout/stderr/error contexts
- handler retrieval APIs (timeline/artifacts + filters)
- edge cases (missing execution id, not found, approval-blocked checkpoint persistence)

### 5) Docs/contracts/changelog updates

Updated:

- `docs/automation-packs.md`
- `README.md`
- `docs/contracts/api-v1-stable-routes.txt`
- `CHANGELOG.md`

## Compatibility

- [compat:additive] Added automation-pack execution timeline/artifact read routes and additive execution payload fields without removing or renaming existing REST/MCP identifiers.
