# v1.0.0-alpha.28 â€” Stage 3.7.3 federation scoped auth + tenancy boundaries

## Highlights

### 1) Additive federation tenancy model

- Added additive tenancy identifiers across federation source attribution and filters:
  - `tenant_id`
  - `org_id`
  - `scope_id`
- Unset tenancy identifiers now normalize to `default` for backward-compatible single-tenant behavior.
- Added aggregate tenancy rollups:
  - `aggregates.tenant_distribution`
  - `aggregates.org_distribution`
  - `aggregates.scope_distribution`

### 2) Scoped federation authorization (REST + MCP)

- Federation routes and MCP federation surfaces now enforce optional scope grants when present:
  - `tenant:<id>`
  - `org:<id>`
  - `scope:<id>`
- Scoped callers are automatically segmented to authorized tenancy boundaries, even when they omit tenancy query parameters.
- Explicit unauthorized tenancy filter requests return scoped authorization errors:
  - REST: `403` with `code: forbidden_scope`
  - MCP: scoped authorization errors from tool/resource handlers

### 3) Audit attribution improvements

- Added federation read audit events (`federation.read`) with tenant/org/scope attribution context.
- Expanded scoped-denial attribution details for federation authorization denials to include requested/effective/allowed tenant/scope fields.

### 4) Test coverage and docs

- Added tenancy segmentation tests in federation read-model coverage.
- Added REST scope-authorization and audit-attribution coverage tests.
- Added MCP federation permission/scope coverage tests.
- Updated federation docs + README references for Stage 3.7.3 behavior.

## Compatibility

- [compat:additive] Added tenancy fields/filter params (`tenant_id`, `org_id`, `scope_id`), additive aggregate fields, and additive audit metadata while preserving existing API/MCP route/tool/resource identifiers.
