# v1.0.0-alpha.20 — Stage 3.4 probe connectivity resilience

Release date: 2026-03-01

## Highlights

### 1) Reduced false disconnect noise during probe reconnects
- WebSocket lifecycle handling now ignores stale replaced connections when a newer socket for the same probe ID is already active.
- This prevents duplicate `probe.disconnected` transitions during rapid reconnect/replacement scenarios (for example during DaemonSet churn).

### 2) Stronger probe identity deduplication + stale cleanup
- Hostname lookup now prefers healthiest/most-recent candidates (online/degraded first, then latest `last_seen`) instead of relying on map iteration order.
- Re-registration now prunes stale duplicate hostname identities (offline or long-stale non-online records) to prevent probe-ID drift and credential confusion loops.

### 3) Safer offline/credential resilience paths
- Control-plane offline transition threshold increased from 60s to 90s to reduce transient flapping.
- Fleet stale transition logic now marks any stale non-offline status (`online`, `degraded`, `pending`) offline consistently.
- Probe connection loop now classifies 401/403 handshake failures as credential errors, logs explicit remediation guidance, and uses extended fixed retry cadence to avoid hot reconnect loops.

## Validation checklist
- `go test ./...` (pre-change baseline) ✅
- `go test ./...` (post-change) ✅
- `make >/tmp/make.log && ./hack/e2e-test.sh` ✅

## Upgrade notes
- No breaking API changes.
- Behavior changes are backward-compatible defaults focused on resilience and noise reduction.
- Existing probes continue to operate unchanged; credential failures now produce clearer diagnostics and safer retry behavior.
