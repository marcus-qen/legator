# v1.0.0-alpha.3 Scope & Hardening Plan

Date: 2026-02-26
Owner: Marcus
Base: v1.0.0-alpha.2 (`1319b31`)

## Objectives

1. **Probe detail UX polish**
   - Replace full-page reload fallback with incremental DOM updates from SSE events.
   - Keep probe status/health/last-seen in sync without losing scroll position.

2. **Release metadata reliability**
   - Standardize build-time version injection (`main.version`, `main.commit`, `main.date`) in Makefile/workflows.
   - Prevent accidental `dev/none/unknown` deployments.

3. **Webhook delivery observability**
   - Add counters/metrics for webhook sends, retries, failures by event type.
   - Surface recent webhook failures in API/UI for fast debugging.

4. **Release/documentation polish**
   - Document public deployment path (`legator.lab.k-dev.uk`) and probe WSS config.
   - Add upgrade notes alpha.1 → alpha.2 and preflight checklist for alpha.3.

## Deliverables

- [ ] Probe detail page incremental updater (JS) + tests where practical
- [ ] Build/release scripts updated for deterministic version metadata
- [ ] Webhook telemetry (metrics + API surface)
- [ ] `CHANGELOG.md` + release runbook updates

## Acceptance Criteria

- `go test ./...` passes
- `bash hack/e2e-test.sh` passes (29/29 or higher)
- `golangci-lint run ./...` clean
- `/version` always returns non-dev metadata on release builds
- Webhook failures visible via metrics or API

## Candidate Task Breakdown

1. **P3-1** Probe detail incremental SSE renderer
2. **P3-2** Build/version injection hardening
3. **P3-3** Webhook delivery metrics + diagnostics endpoint
4. **P3-4** Docs/runbook/changelog update

## Risks

- SSE event ordering and stale UI state during reconnect bursts
- Metrics cardinality growth if labels include probe IDs
- Drift between local build scripts and CI release workflow

## Notes

- Alpha.2 shipped: scoped API auth, event→webhook wiring, server tests, public Caddy route, probe detail SSE baseline.
- Keep alpha.3 focused on hardening and operability, not major new surface area.
